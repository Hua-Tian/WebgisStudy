function bindCompany(a){a.isAdmin?($("#leftmenu").prepend(a.data),setDefault()):($.data(document,"companyCd",a.companycd),$.data(document,"companyName",a.companyname),$.data(document,"defaultOption",a.storedefault),$.data(document,"defaultCate",a.categorydefault),$.data(document,"defaultRange",a.rangedefault)),$("#area2").selectpicker({size:"7",maxOptions:"5",style:"btn-default btn-sm btn-sel",actionsBox:!0,container:"body",noneResultsText:messages["M-041"]}),$("#area3").selectpicker({size:"7",maxOptions:"5",style:"btn-default btn-sm btn-sel",actionsBox:!0,container:"body",noneResultsText:messages["M-042"]}),$("#area2,#area3").siblings("button").attr("disabled",!0),bindArea("area1","00000000000"),get("mdates",{},Month.setData)}function setDefault(){var a=$("#company option:selected");$.data(document,"companyCd",a.val()),$.data(document,"companyName",a.text()),$.data(document,"defaultOption",a.attr("storedefault")),$.data(document,"defaultCate",a.attr("categorydefault")),$.data(document,"defaultRange",a.attr("rangedefault"))}function bindArea(a,b){var c="";switch(a){case"area1":c="arealevel1";break;case"area2":c="arealevel2";break;case"area3":c="arealevel3"}get("mranges",{arealevel:c,areacd:b},function(b){var c=$("#"+a);"area1"!=a&&c.html($("<option value='0'>").text("すべて")),Enumerable.From(b).Select(function(a){return $("<option x='"+a.x+"' y='"+a.y+"' value='"+a.a+"'>").text(a.b)[0]}).TojQuery().appendTo("#"+a),"area1"!=a&&c.selectpicker("refresh")})}function setTitle(){var b,a=Enumerable.From($(".select-area option:selected[value!='0']"));$("#title-company").text(a.ToString(" / ","$.text")),$(".areatotal").text(a.ToString("","$.text")),$("#print-area").text($(".select-area option:selected[value!='0']").text()),$("#title-month,#print-month").text($("#month"+$("input[name='monthtype']:checked").val()+" option:selected").text()),b="",$("#proportion")[0].checked?b="(率)":"",$("#less")[0].checked?b="(差)":"",$("#title-item,#print-item").text($("#option3 option:selected").text()+b),$("#print-age").text(Enumerable.From($("#age option:selected")).ToString(" ","$.text"))}function getMapPara(){var a={arealvl:$("#hidarealvl").val(),arealvl1:$("#hidarealvl1cd").val(),arealvl2:$("#hidarealvl2cd").val(),arealvl3:$("#hidarealvl3cd").val(),datetype:$("#hiddatetype").val(),yearmonthcd:$("#hidyearmonthcd").val(),datecompare:$("#hiddatecompare").val(),datespare:$("#hidddatespare").val(),option:$("#hidoption").val(),optiontype:$("#hidoptiontype").val(),optionscales:$("#hidoptionscales").val(),arealevel:$("#hidarealevel").val(),companycd:$("#hidcompanycd").val()};return"00"==a.optiontype&&(a.optionscales="0000"),a}function getLatlng(){var b,c,d,e,a=getMapPara();switch(a.arealvl){case"1":b=$("#area1 option:selected");break;case"2":b=$("#area2 option:selected");break;case"3":b=$("#area3 option:selected")}return c=parseFloat(b.attr("y")),d=parseFloat(b.attr("x")),e={lat:c,lng:d},storeArray=[{storecd:b.val(),storename:b.text(),longitude:d,latitude:c}],e}function getMapData(a){get("dareas",a,function(a){enablePrint(),$("#leftmenu").collapse("hide");var b=getLatlng();$("#mapheader").show(),$("#save-widget").show(),drawMap(b,a)},{stopIfNull:!1})}$("#leftmenu").on("change","#company",function(){setDefault(),$("input[name='monthtype'][value='0']").click(),$("#yesterday")[0].checked=!1,$("#yesterday").removeAttr("disabled"),$("#compare")[0].checked=!1,$("#comparemonth").hide(),$("#month0").find("option:first")[0].selected=!0,$("#month1").find("option:first")[0].selected=!0,$("#month2").find("option:first")[0].selected=!0,$("#area1 option:first")[0].selected=!0,$("#area1").change(),storeUploader.options.formData={companycd:$.data(document,"companyCd")}}),$("#age").selectpicker({size:"7",style:"btn-default btn-sm btn-sel"}),$("#btn-store").click(function(){window.location.href="store.html"}),$("#btn-newstore").click(function(){window.location.href="newstore.html"}),$("#area1").change(function(){var a=$(this).val();$("#area2,#area3").empty(),$("#area2,#area3").siblings("button").children(".filter-option").text(""),$("#area2,#area3").siblings("button").attr("disabled",!0),0!=a&&($("#area2").siblings("button").removeAttr("disabled"),bindArea("area2",a))}),$("#area2").change(function(){var a=$(this).val();$("#area3").empty(),$("#area3").siblings("button").children(".filter-option").text(""),$("#area3").siblings("button").attr("disabled",!0),0!=a&&($("#area3").siblings("button").removeAttr("disabled"),bindArea("area3",a))}),$("#btnquery").click(function(){var e,f,g,h,i,j,a=1,b="0",c="0",d="0";return b=$("#area1").val(),"0"==b?($.tremaps.showMessage("M-034"),void 0):(enableRight(),"0"!=$("#area2").val()&&null!=$("#area2").val()&&(a=2,c=$("#area2").val()),"0"!=$("#area3").val()&&null!=$("#area3").val()&&(a=3,d=$("#area3").val()),e=$.data(document,"companyCd"),$("#hidcompanycd").val(e),f=$("input:radio[name='monthtype']:checked").val(),$("#hiddatetype").val(f),0==f&&$(".monthcompare:checked").length>0?$("#hidmonthcompare").val(1):$("#hidmonthcompare").val(0),Option.defaultValue=$.data(document,"defaultRange"),$.data(document,"tempCompanyCd")!=e||$.data(document,"tempDateType")!=f||$.data(document,"tempMonthCompare")!=$("#hidmonthcompare").val()?($.data(document,"tempCompanyCd")!=e&&(class0Array=[],class1Array=[],classCompanyArray=[],cc()),$.data(document,"tempDateType",f),$.data(document,"tempMonthCompare",$("#hidmonthcompare").val()),get("moptions",{companycd:e,datetype:f},Option.setData,{async:!1}),$.data(document,"tempCompanyCd",e)):Option.fillData(0),g=$("#month"+$("input:radio[name='monthtype']:checked").val()).val(),h=0,i="000000",0==f&&($("#yesterday")[0].checked&&(h=2),$("#compare")[0].checked&&(h=4,i=$("#comparemonth").val())),$("#hidarealvl").val(a),$("#hidarealvl1cd").val(b),$("#hidarealvl2cd").val(c),$("#hidarealvl3cd").val(d),$("#hidyearmonthcd").val(g),$("#hiddatecompare").val(h),$("#hidddatespare").val(i),$("#hidoption").val($("#option3").val()),$("#hidoptiontype").val($("#agescale").val()),$("#hidoptionscales").val(null==$("#age").val()?"0000":$("#age").val().join("_")),$("#hidarealevel").val($("#arealevel").val()),$.data(document,"yeaterday",$("#yesterday")[0].checked),$.data(document,"compare",$("#compare")[0].checked),j=getMapPara(),j.arealevel="arealevel4",getMapData(j),setTitle(),void 0)}),$("#option-query").click(function(){var a,b;return 0!=$("#agescale").val()&&null==$("#age").val()?($.tremaps.showMessage("M-048"),void 0):($("#hidoption").val($("#option3").val()),$("#hidoptiontype").val($("#agescale").val()),$("#hidoptionscales").val(null==$("#age").val()?"0000":$("#age").val().join("_")),$("#hidarealevel").val($("#arealevel").val()),a=getMapPara(),a.option=$("#option3").val(),$("#proportion")[0].checked&&($.data(document,"yeaterday")&&(a.datecompare=1),$.data(document,"compare")&&(a.datecompare=3)),$("#hiddatecompare").val(a.datecompare),getMapData(a),b="",$("#proportion")[0].checked?b="(率)":"",$("#less")[0].checked?b="(差)":"",$("#title-item,#print-item").text($("#option3 option:selected").text()+b),$("#print-age").text(Enumerable.From($("#age option:selected")).ToString(" ","$.text")),void 0)}),$("#downexcel").click(function(){var a=getMapPara();return""==a.arealvl||$(this).hasClass("disabled")?($.tremaps.showMessage("M-004"),void 0):(DownLoadFile({url:url+urlpaths["A001"],data:a}),void 0)}),$("#showlabel").click(function(){$(this)[0].checked?showLabel():hideLabel()});